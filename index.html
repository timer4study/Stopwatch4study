
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Study Stopwatch & Pomodoro Timerâ€”stopwatch4study</title>

  <style>
    :root{--bg:#0f1724;--accent:#60a5fa;--muted:#94a3b8}
    body{
      margin:0;
      font-family:system-ui;
      background:#071129;
      color:#e6eef8;
    }
    .wrap{
      max-width:420px;
      margin:30px auto;
      padding:20px;
      background:rgba(255,255,255,0.03);
      border-radius:18px;
    }
    h1{text-align:center;color:var(--accent);font-size:20px;margin-bottom:15px}

    /* ðŸ”¥ BIG DISPLAY DIAL ðŸ”¥ */
    .display{
      font-size:72px;
      font-weight:700;
      text-align:center;
      padding:40px 0;
      background:rgba(255,255,255,0.04);
      border-radius:20px;
      margin:20px 0;
    }

    .controls button{
      width:100%;
      padding:12px;
      margin-top:8px;
      background:var(--accent);
      color:#04243b;
      border:0;
      border-radius:12px;
      font-weight:700;
      font-size:16px;
    }
    button.secondary{
      background:transparent;
      border:1px solid rgba(255,255,255,0.1);
      color:var(--muted);
    }

    .row{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .row div{margin-top:10px}

    input{
      width:70px;
      padding:7px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.05);
      background:transparent;
      color:white;
    }

    .small{
      margin-top:10px;
      padding:8px;
      font-size:13px;
    }

    .status{
      margin-top:12px;
      color:var(--muted);
      font-size:14px;
    }

    .chip{
      padding:6px 10px;
      background:rgba(255,255,255,0.05);
      border-radius:999px;
      font-weight:600;
    }

    /* ðŸ”¥ RESPONSIVENESS (Mobile-First Adjustments) ðŸ”¥ */
    @media (max-width: 450px) {
      .wrap {
        margin: 10px;
        padding: 15px;
      }
      .display {
        font-size: 56px;
        padding: 30px 0;
      }
      .controls button,
      .row button {
        font-size: 15px;
        padding: 10px;
      }
      .row {
        justify-content: space-around;
      }
    }

  </style>
</head>

<body>

<audio id="workBeep">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<audio id="breakBeep">
  <source src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg">
</audio>

<div class="wrap">

<h1>Study Stopwatch & Pomodoro</h1>

<div class="display" id="time">00:00:00</div>

<div class="controls">
  <button id="startBtn">Start</button>
  <button id="pauseBtn" class="secondary">Pause</button>
  <button id="resetBtn" class="secondary">Reset</button>
</div>

<div class="row">
  <div>Mode: <span class="chip" id="chip">STOPWATCH</span></div>
  <div>Work<br><input id="wm" type="number" value="25" min="1"></div>
  <div>Break<br><input id="bm" type="number" value="5" min="1"></div>
  <div>Cycles<br><input id="cy" type="number" value="4" min="1"></div>
</div>

<div class="row">
  <button id="startPom" class="small">Start Pomodoro</button>
  <button id="stopPom" class="small secondary">Stop Pomodoro</button>
  <button id="lap" class="small secondary">Lap</button>
</div>

<div class="status" id="status">Ready.</div>

</div>

<script>

/* ---------------- STOPWATCH ---------------- */
let running=false, start=0, elapsed=0, swInt=null;

// MODIFIED: Formatting function now displays HH:MM:SS (seconds)
function fmt(ms){
 let c=Math.floor(ms/1000); // Total seconds
 let z=v=>v.toString().padStart(2,"0");
 // HH:MM:SS
 return `${z(Math.floor(c/3600))}:${z(Math.floor(c/60)%60)}:${z(c%60)}`;
}

function update(){
 let ms=elapsed;
 if(running) ms+=Date.now()-start;
 document.getElementById("time").textContent=fmt(ms);
}

function startSW(){
 if(running) return;
 running=true;
 start=Date.now();
 swInt=setInterval(update,1000); // Updated interval to 1000ms (1 second)
}

function pauseSW(){
 if(!running) return;
 elapsed+=Date.now()-start;
 running=false;
 clearInterval(swInt);
 update();
}

function resetSW(){
 running=false;
 elapsed=0;
 clearInterval(swInt);
 update();
}

document.getElementById("startBtn").onclick=startSW;
document.getElementById("pauseBtn").onclick=pauseSW;
document.getElementById("resetBtn").onclick=resetSW;


/* ---------------- POMODORO ---------------- */
let pom=false, cycle=1, total=4, isWork=true, remain=0, pomInt=null;

function play5x(id){
 let a=document.getElementById(id);
 a.play(); setTimeout(()=>a.play(),900);
 setTimeout(()=>a.play(),1800);
 setTimeout(()=>a.play(),2700);
 setTimeout(()=>a.play(),3600);
}

document.getElementById("startPom").onclick=()=>{

 if(pom) return;

 cycle=1;
 total=parseInt(cy.value);
 isWork=true;
 pom=true;

 chip.textContent="POMODORO";
 status.textContent=`Cycle 1/${total} â€” Work`;

 let w=parseInt(wm.value);
 remain=w*60;

 resetSW(); startSW();

 pomInt=setInterval(()=>{
   remain--;

   let mm=String(Math.floor(remain/60)).padStart(2,'0');
   let ss=String(remain%60).padStart(2,'0');

   status.textContent=`${isWork?"Work":"Break"} â€” ${mm}:${ss} left (Cycle ${cycle}/${total})`;

   if(remain<=0){

     if(isWork){
       play5x("workBeep");
       isWork=false;

       let brk=parseInt(bm.value);
       if(cycle%4===0) brk=15;

       remain=brk*60;
       status.textContent="Work finished â€” Break starts";

       resetSW(); startSW();

     } else {
       play5x("breakBeep");

       cycle++;
       if(cycle>total){
         status.textContent=`Pomodoro complete (${total} cycles)`;
         pom=false;
         chip.textContent="STOPWATCH";
         clearInterval(pomInt);
         pauseSW();
         return;
       }

       isWork=true;
       let w=parseInt(wm.value);
       remain=w*60;
       status.textContent=`Break finished â€” Work starts`;

       resetSW(); startSW();
     }
   }

 },1000);

};

document.getElementById("stopPom").onclick=()=>{
 pom=false;
 chip.textContent="STOPWATCH";
 clearInterval(pomInt);
 pauseSW();
 status.textContent="Pomodoro stopped";
};

document.getElementById("lap").onclick=()=>{
 let now=running?elapsed+(Date.now()-start):elapsed;
 status.textContent=`Lap: ${fmt(now)}`;
 setTimeout(()=>status.textContent="",1500);
};

</script>

</body>
  </html>
  
